app PeaceKeeper
{
    on Enter =>
    {
        'Begin' >> @>log;
 
        Go()[: on weak cancel { 'on weak cancel' >> @>log; } :];

        'End' >> @>log;
    }
}

action Go 
{
    op () => 
    {
        'Begin Go' >> @>log;
        await;
        'End Go' >> @>log;
    }

    on {: see(I, $x) :} ($x >> @x) => 
    {
        weak cancel action;
    }
}
